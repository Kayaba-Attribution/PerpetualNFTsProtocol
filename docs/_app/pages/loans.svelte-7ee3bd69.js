import{S as Pe,i as Ce,s as Se,e as g,G as oe,k as C,t as q,c as k,a as b,H as ne,d as h,m as S,h as D,b as u,g as N,J as i,j as K,K as O,a2 as $e,a3 as $,L as Ne,I as U,a4 as Te,M as ce,a1 as He,a5 as je,V as Me,X as Ue,q as W,Y as Ye,Z as We,$ as Le,n as Ae,o as X,p as Ve,_ as Oe,a6 as et,U as tt,v as lt,f as ke,w as we,l as Re,x as ye,y as Ee,B as xe}from"../chunks/vendor-e23481e1.js";import{c as ee,f as rt,a as at,d as st}from"../chunks/eth-d54c303d.js";import{b as Ge}from"../chunks/paths-4b3c6e7e.js";function ot(s){let e=(s[2]*s[1]).toFixed(3)+"",t,l,r,a;return{c(){t=q(e),l=C(),r=g("span"),a=q("USD"),this.h()},l(n){t=D(n,e),l=S(n),r=k(n,"SPAN",{class:!0});var o=b(r);a=D(o,"USD"),o.forEach(h),this.h()},h(){u(r,"class","text-sm")},m(n,o){N(n,t,o),N(n,l,o),N(n,r,o),i(r,a)},p(n,o){o&6&&e!==(e=(n[2]*n[1]).toFixed(3)+"")&&K(t,e)},d(n){n&&h(t),n&&h(l),n&&h(r)}}}function nt(s){let e=s[2].toFixed(3)+"",t,l,r,a;return{c(){t=q(e),l=C(),r=g("span"),a=q("MATIC"),this.h()},l(n){t=D(n,e),l=S(n),r=k(n,"SPAN",{class:!0});var o=b(r);a=D(o,"MATIC"),o.forEach(h),this.h()},h(){u(r,"class","text-sm")},m(n,o){N(n,t,o),N(n,l,o),N(n,r,o),i(r,a)},p(n,o){o&4&&e!==(e=n[2].toFixed(3)+"")&&K(t,e)},d(n){n&&h(t),n&&h(l),n&&h(r)}}}function it(s){let e,t,l,r,a,n,o,c,d,m,w,f,p,v,E=s[2].toFixed(3)+"",x,P;function _(I,A){return I[1]?ot:nt}let y=_(s),F=y(s);return{c(){e=g("div"),t=g("div"),l=g("span"),r=oe("svg"),a=oe("path"),n=C(),o=g("p"),c=q(s[0]),d=C(),m=g("div"),w=g("p"),F.c(),f=C(),p=g("div"),v=g("span"),x=q(E),P=q(" MATIC"),this.h()},l(I){e=k(I,"DIV",{class:!0,"hover:bg-sky-700":!0});var A=b(e);t=k(A,"DIV",{class:!0});var z=b(t);l=k(z,"SPAN",{class:!0});var Y=b(l);r=ne(Y,"svg",{width:!0,fill:!0,height:!0,class:!0,viewBox:!0,xmlns:!0});var Z=b(r);a=ne(Z,"path",{d:!0});var te=b(a);te.forEach(h),Z.forEach(h),Y.forEach(h),n=S(z),o=k(z,"P",{class:!0});var H=b(o);c=D(H,s[0]),H.forEach(h),z.forEach(h),d=S(A),m=k(A,"DIV",{class:!0});var le=b(m);w=k(le,"P",{class:!0});var L=b(w);F.l(L),L.forEach(h),le.forEach(h),f=S(A),p=k(A,"DIV",{class:!0});var j=b(p);v=k(j,"SPAN",{});var G=b(v);x=D(G,E),P=D(G," MATIC"),G.forEach(h),j.forEach(h),A.forEach(h),this.h()},h(){u(a,"d","M1362 1185q0 153-99.5 263.5t-258.5 136.5v175q0 14-9 23t-23 9h-135q-13 0-22.5-9.5t-9.5-22.5v-175q-66-9-127.5-31t-101.5-44.5-74-48-46.5-37.5-17.5-18q-17-21-2-41l103-135q7-10 23-12 15-2 24 9l2 2q113 99 243 125 37 8 74 8 81 0 142.5-43t61.5-122q0-28-15-53t-33.5-42-58.5-37.5-66-32-80-32.5q-39-16-61.5-25t-61.5-26.5-62.5-31-56.5-35.5-53.5-42.5-43.5-49-35.5-58-21-66.5-8.5-78q0-138 98-242t255-134v-180q0-13 9.5-22.5t22.5-9.5h135q14 0 23 9t9 23v176q57 6 110.5 23t87 33.5 63.5 37.5 39 29 15 14q17 18 5 38l-81 146q-8 15-23 16-14 3-27-7-3-3-14.5-12t-39-26.5-58.5-32-74.5-26-85.5-11.5q-95 0-155 43t-60 111q0 26 8.5 48t29.5 41.5 39.5 33 56 31 60.5 27 70 27.5q53 20 81 31.5t76 35 75.5 42.5 62 50 53 63.5 31.5 76.5 13 94z"),u(r,"width","40"),u(r,"fill","currentColor"),u(r,"height","40"),u(r,"class","text-purple-500 h-4 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"),u(r,"viewBox","0 0 1792 1792"),u(r,"xmlns","http://www.w3.org/2000/svg"),u(l,"class","rounded-xl relative p-4 bg-purple-200"),u(o,"class","text-md text-black dark:text-white ml-2"),u(t,"class","flex items-center"),u(w,"class","text-gray-700 dark:text-gray-100 text-4xl text-left font-bold my-4"),u(m,"class","flex flex-col justify-start"),u(p,"class","flex items-center text-gray-700 dark:text-gray-100 text-sm"),u(e,"class","shadow-lg rounded-2xl p-4 bg-white dark:bg-gray-800"),u(e,"hover:bg-sky-700","")},m(I,A){N(I,e,A),i(e,t),i(t,l),i(l,r),i(r,a),i(t,n),i(t,o),i(o,c),i(e,d),i(e,m),i(m,w),F.m(w,null),i(e,f),i(e,p),i(p,v),i(v,x),i(v,P)},p(I,[A]){A&1&&K(c,I[0]),y===(y=_(I))&&F?F.p(I,A):(F.d(1),F=y(I),F&&(F.c(),F.m(w,null))),A&4&&E!==(E=I[2].toFixed(3)+"")&&K(x,E)},i:O,o:O,d(I){I&&h(e),F.d()}}}function ut(s,e,t){let l,{title:r=""}=e,{value:a=0}=e,{maticSpotPrice:n=0}=e;const o=$e(Number($(a)),{duration:500});return Ne(s,o,c=>t(2,l=c)),s.$$set=c=>{"title"in c&&t(0,r=c.title),"value"in c&&t(4,a=c.value),"maticSpotPrice"in c&&t(1,n=c.maticSpotPrice)},s.$$.update=()=>{s.$$.dirty&16&&a&&o.set(Number($(a)))},[r,n,l,o,a]}class ze extends Pe{constructor(e){super();Ce(this,e,ut,it,Se,{title:0,value:4,maticSpotPrice:1})}}function ct(s){let e;return{c(){e=q("Take Loan")},l(t){e=D(t,"Take Loan")},m(t,l){N(t,e,l)},d(t){t&&h(e)}}}function ft(s){let e,t,l;return{c(){e=oe("svg"),t=oe("path"),l=q(`
      Taking Loan...`),this.h()},l(r){e=ne(r,"svg",{width:!0,height:!0,fill:!0,class:!0,viewBox:!0,xmlns:!0});var a=b(e);t=ne(a,"path",{d:!0});var n=b(t);n.forEach(h),a.forEach(h),l=D(r,`
      Taking Loan...`),this.h()},h(){u(t,"d","M526 1394q0 53-37.5 90.5t-90.5 37.5q-52 0-90-38t-38-90q0-53 37.5-90.5t90.5-37.5 90.5 37.5 37.5 90.5zm498 206q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm-704-704q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm1202 498q0 52-38 90t-90 38q-53 0-90.5-37.5t-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm-964-996q0 66-47 113t-113 47-113-47-47-113 47-113 113-47 113 47 47 113zm1170 498q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm-640-704q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm530 206q0 93-66 158.5t-158 65.5q-93 0-158.5-65.5t-65.5-158.5q0-92 65.5-158t158.5-66q92 0 158 66t66 158z"),u(e,"width","20"),u(e,"height","20"),u(e,"fill","currentColor"),u(e,"class","mr-2 animate-spin"),u(e,"viewBox","0 0 1792 1792"),u(e,"xmlns","http://www.w3.org/2000/svg")},m(r,a){N(r,e,a),i(e,t),N(r,l,a)},d(r){r&&h(e),r&&h(l)}}}function ht(s){let e,t,l,r,a,n,o=(s[2]?Number($(s[2])).toFixed(2):"---")+"",c,d,m,w,f,p,v=(s[2]?(s[0]*Number($(s[2]))).toFixed(3):"---")+"",E,x,P,_,y,F,I,A,z,Y,Z,te,H,le,L,j,G,B,fe,J=s[4].toFixed(3)+"",ie,re,ue,ve;function be(R,T){return R[3]?ft:ct}let he=be(s),Q=he(s);return{c(){e=g("div"),t=g("h1"),l=q("Take a loan! You can borrow up to 50% of your collateral! (INTEREST RATE: 10% YEARLY)"),r=C(),a=g("div"),n=g("p"),c=q(o),d=C(),m=g("span"),w=q("MATIC"),f=C(),p=g("p"),E=q(v),x=C(),P=g("span"),_=q("USD"),y=C(),F=g("div"),I=g("div"),A=q("Safer"),z=C(),Y=g("div"),Z=q("Riskier"),te=C(),H=g("input"),le=C(),L=g("div"),j=g("button"),Q.c(),G=C(),B=g("p"),fe=q("Health Factor: "),ie=q(J),re=q("%"),this.h()},l(R){e=k(R,"DIV",{class:!0});var T=b(e);t=k(T,"H1",{class:!0});var M=b(t);l=D(M,"Take a loan! You can borrow up to 50% of your collateral! (INTEREST RATE: 10% YEARLY)"),M.forEach(h),r=S(T),a=k(T,"DIV",{class:!0});var V=b(a);n=k(V,"P",{class:!0});var de=b(n);c=D(de,o),d=S(de),m=k(de,"SPAN",{class:!0});var me=b(m);w=D(me,"MATIC"),me.forEach(h),de.forEach(h),f=S(V),p=k(V,"P",{class:!0});var ae=b(p);E=D(ae,v),x=S(ae),P=k(ae,"SPAN",{class:!0});var qe=b(P);_=D(qe,"USD"),qe.forEach(h),ae.forEach(h),V.forEach(h),y=S(T),F=k(T,"DIV",{class:!0});var se=b(F);I=k(se,"DIV",{class:!0});var De=b(I);A=D(De,"Safer"),De.forEach(h),z=S(se),Y=k(se,"DIV",{class:!0});var _e=b(Y);Z=D(_e,"Riskier"),_e.forEach(h),se.forEach(h),te=S(T),H=k(T,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),le=S(T),L=k(T,"DIV",{class:!0});var Fe=b(L);j=k(Fe,"BUTTON",{class:!0});var ge=b(j);Q.l(ge),ge.forEach(h),Fe.forEach(h),G=S(T),B=k(T,"P",{class:!0});var pe=b(B);fe=D(pe,"Health Factor: "),ie=D(pe,J),re=D(pe,"%"),pe.forEach(h),T.forEach(h),this.h()},h(){u(t,"class","text-xl font-extrabold text-transparent bg-clip-text bg-gradient-to-br from-blue-300 to-green-600"),u(m,"class","text-sm"),u(n,"class","px-5 text-gray-700 dark:text-gray-100 text-4xl text-left font-bold my-4"),u(P,"class","text-sm"),u(p,"class","px-5 dark:text-gray-100 text-4xl text-left font-bold my-4"),u(a,"class","flex justify-center"),u(I,"class","flex-1 ..."),u(Y,"class","flex-1 ..."),u(F,"class","flex text-gray-700 dark:text-gray-100 text-sm"),u(H,"type","range"),u(H,"min","0"),u(H,"max","100"),u(H,"class","w-full svelte-5hac4d"),u(H,"id","myinput"),u(j,"class","py-2 px-4 flex justify-center items-center bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 focus:ring-offset-blue-200 text-white rounded-lg "),U(j,"disabled",s[3]),U(j,"cursor-wait",s[3]),u(L,"class","py-3 flex justify-center ..."),u(B,"class","text-gray-700 dark:text-gray-100 text-sm"),u(e,"class","shadow-lg rounded-2xl p-4 mt-4 bg-white dark:bg-gray-800 text-center")},m(R,T){N(R,e,T),i(e,t),i(t,l),i(e,r),i(e,a),i(a,n),i(n,c),i(n,d),i(n,m),i(m,w),i(a,f),i(a,p),i(p,E),i(p,x),i(p,P),i(P,_),i(e,y),i(e,F),i(F,I),i(I,A),i(F,z),i(F,Y),i(Y,Z),i(e,te),i(e,H),Te(H,s[1]),i(e,le),i(e,L),i(L,j),Q.m(j,null),i(e,G),i(e,B),i(B,fe),i(B,ie),i(B,re),ue||(ve=[ce(H,"change",s[10]),ce(H,"input",s[10]),ce(j,"click",s[5])],ue=!0)},p(R,[T]){T&4&&o!==(o=(R[2]?Number($(R[2])).toFixed(2):"---")+"")&&K(c,o),T&5&&v!==(v=(R[2]?(R[0]*Number($(R[2]))).toFixed(3):"---")+"")&&K(E,v),T&2&&Te(H,R[1]),he!==(he=be(R))&&(Q.d(1),Q=he(R),Q&&(Q.c(),Q.m(j,null))),T&8&&U(j,"disabled",R[3]),T&8&&U(j,"cursor-wait",R[3]),T&16&&J!==(J=R[4].toFixed(3)+"")&&K(ie,J)},i:O,o:O,d(R){R&&h(e),Q.d(),ue=!1,He(ve)}}}function dt(s,e,t){let l,{healthFactor:r}=e,{currentDebt:a}=e,{currentCollateral:n}=e,{maticSpotPrice:o}=e,c=0,d,m,w=!1;async function f(){try{t(3,w=!0),await(await ee.museum.borrow(m,!1)).wait(1),t(1,c=0)}catch(v){console.log(v)}t(3,w=!1)}function p(){c=je(this.value),t(1,c)}return s.$$set=v=>{"healthFactor"in v&&t(6,r=v.healthFactor),"currentDebt"in v&&t(7,a=v.currentDebt),"currentCollateral"in v&&t(8,n=v.currentCollateral),"maticSpotPrice"in v&&t(0,o=v.maticSpotPrice)},s.$$.update=()=>{s.$$.dirty&384&&t(9,d=n.div(2).sub(a)),s.$$.dirty&512&&t(9,d=d.lt(0)?0:d),s.$$.dirty&514&&(c&&d?t(2,m=d.div(100).mul(Math.round(c))):t(2,m=0)),s.$$.dirty&324&&t(4,l=Number(r.toFixed(2))+(m?Number(m.mul(1e4).div(n))/100:0))},[o,c,m,w,l,f,r,a,n,d,p]}class mt extends Pe{constructor(e){super();Ce(this,e,dt,ht,Se,{healthFactor:6,currentDebt:7,currentCollateral:8,maticSpotPrice:0})}}function _t(s){let e;return{c(){e=q("Repay loan")},l(t){e=D(t,"Repay loan")},m(t,l){N(t,e,l)},d(t){t&&h(e)}}}function pt(s){let e,t,l;return{c(){e=oe("svg"),t=oe("path"),l=q(`
      Repaying Loan...`),this.h()},l(r){e=ne(r,"svg",{width:!0,height:!0,fill:!0,class:!0,viewBox:!0,xmlns:!0});var a=b(e);t=ne(a,"path",{d:!0});var n=b(t);n.forEach(h),a.forEach(h),l=D(r,`
      Repaying Loan...`),this.h()},h(){u(t,"d","M526 1394q0 53-37.5 90.5t-90.5 37.5q-52 0-90-38t-38-90q0-53 37.5-90.5t90.5-37.5 90.5 37.5 37.5 90.5zm498 206q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm-704-704q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm1202 498q0 52-38 90t-90 38q-53 0-90.5-37.5t-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm-964-996q0 66-47 113t-113 47-113-47-47-113 47-113 113-47 113 47 47 113zm1170 498q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm-640-704q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm530 206q0 93-66 158.5t-158 65.5q-93 0-158.5-65.5t-65.5-158.5q0-92 65.5-158t158.5-66q92 0 158 66t66 158z"),u(e,"width","20"),u(e,"height","20"),u(e,"fill","currentColor"),u(e,"class","mr-2 animate-spin"),u(e,"viewBox","0 0 1792 1792"),u(e,"xmlns","http://www.w3.org/2000/svg")},m(r,a){N(r,e,a),i(e,t),N(r,l,a)},d(r){r&&h(e),r&&h(l)}}}function vt(s){let e,t,l,r,a,n,o=(s[3]?Number($(s[3])).toFixed(2):"0")+"",c,d,m,w,f,p,v=(s[3]?(s[1]*Number($(s[3]))).toFixed(3):"0")+"",E,x,P,_,y,F,I,A,z,Y,Z=Number($(s[0])).toFixed(3)+"",te,H,le,L,j,G,B,fe,J,ie,re=s[5].toFixed(3)+"",ue,ve,be,he;function Q(M,V){return M[4]?pt:_t}let R=Q(s),T=R(s);return{c(){e=g("div"),t=g("h1"),l=q("Repay Loan"),r=C(),a=g("div"),n=g("p"),c=q(o),d=C(),m=g("span"),w=q("MATIC"),f=C(),p=g("p"),E=q(v),x=C(),P=g("span"),_=q("USD"),y=C(),F=g("div"),I=g("div"),A=q("0"),z=C(),Y=g("div"),te=q(Z),H=q(" MATIC"),le=C(),L=g("input"),j=C(),G=g("div"),B=g("button"),T.c(),fe=C(),J=g("p"),ie=q("Health Factor: "),ue=q(re),ve=q("%"),this.h()},l(M){e=k(M,"DIV",{class:!0});var V=b(e);t=k(V,"H1",{class:!0});var de=b(t);l=D(de,"Repay Loan"),de.forEach(h),r=S(V),a=k(V,"DIV",{class:!0});var me=b(a);n=k(me,"P",{class:!0});var ae=b(n);c=D(ae,o),d=S(ae),m=k(ae,"SPAN",{class:!0});var qe=b(m);w=D(qe,"MATIC"),qe.forEach(h),ae.forEach(h),f=S(me),p=k(me,"P",{class:!0});var se=b(p);E=D(se,v),x=S(se),P=k(se,"SPAN",{class:!0});var De=b(P);_=D(De,"USD"),De.forEach(h),se.forEach(h),me.forEach(h),y=S(V),F=k(V,"DIV",{class:!0});var _e=b(F);I=k(_e,"DIV",{class:!0});var Fe=b(I);A=D(Fe,"0"),Fe.forEach(h),z=S(_e),Y=k(_e,"DIV",{class:!0});var ge=b(Y);te=D(ge,Z),H=D(ge," MATIC"),ge.forEach(h),_e.forEach(h),le=S(V),L=k(V,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),j=S(V),G=k(V,"DIV",{class:!0});var pe=b(G);B=k(pe,"BUTTON",{class:!0});var Be=b(B);T.l(Be),Be.forEach(h),pe.forEach(h),fe=S(V),J=k(V,"P",{class:!0});var Ie=b(J);ie=D(Ie,"Health Factor: "),ue=D(Ie,re),ve=D(Ie,"%"),Ie.forEach(h),V.forEach(h),this.h()},h(){u(t,"class","text-xl font-extrabold text-transparent bg-clip-text bg-gradient-to-br from-blue-300 to-green-600"),u(m,"class","text-sm"),u(n,"class","px-5 text-gray-700 dark:text-gray-100 text-4xl text-left font-bold my-4"),u(P,"class","text-sm"),u(p,"class","px-5 dark:text-gray-100 text-4xl text-left font-bold my-4"),u(a,"class","flex justify-center"),u(I,"class","flex-1 ..."),u(Y,"class","flex-1 ..."),u(F,"class","flex text-gray-700 dark:text-gray-100 text-sm"),u(L,"type","range"),u(L,"min","0"),u(L,"max","100"),u(L,"class","w-full svelte-10t4h28"),u(L,"id","myinput"),u(B,"class","py-2 px-4 flex justify-center items-center bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 focus:ring-offset-blue-200 text-white rounded-lg "),U(B,"disabled",s[4]),U(B,"cursor-wait",s[4]),u(G,"class","py-3 flex justify-center ..."),u(J,"class","text-gray-700 dark:text-gray-100 text-sm"),u(e,"class","shadow-lg rounded-2xl p-4 mt-4 bg-white dark:bg-gray-800 text-center")},m(M,V){N(M,e,V),i(e,t),i(t,l),i(e,r),i(e,a),i(a,n),i(n,c),i(n,d),i(n,m),i(m,w),i(a,f),i(a,p),i(p,E),i(p,x),i(p,P),i(P,_),i(e,y),i(e,F),i(F,I),i(I,A),i(F,z),i(F,Y),i(Y,te),i(Y,H),i(e,le),i(e,L),Te(L,s[2]),i(e,j),i(e,G),i(G,B),T.m(B,null),i(e,fe),i(e,J),i(J,ie),i(J,ue),i(J,ve),be||(he=[ce(L,"change",s[9]),ce(L,"input",s[9]),ce(B,"click",s[6])],be=!0)},p(M,[V]){V&8&&o!==(o=(M[3]?Number($(M[3])).toFixed(2):"0")+"")&&K(c,o),V&10&&v!==(v=(M[3]?(M[1]*Number($(M[3]))).toFixed(3):"0")+"")&&K(E,v),V&1&&Z!==(Z=Number($(M[0])).toFixed(3)+"")&&K(te,Z),V&4&&Te(L,M[2]),R!==(R=Q(M))&&(T.d(1),T=R(M),T&&(T.c(),T.m(B,null))),V&16&&U(B,"disabled",M[4]),V&16&&U(B,"cursor-wait",M[4]),V&32&&re!==(re=M[5].toFixed(3)+"")&&K(ue,re)},i:O,o:O,d(M){M&&h(e),T.d(),be=!1,He(he)}}}function bt(s,e,t){let l,{healthFactor:r}=e,{currentDebt:a}=e,{currentCollateral:n}=e,{maticSpotPrice:o}=e,c=0,d,m=!1;async function w(){try{t(4,m=!0),await(await ee.museum.repay({value:d.add(Me("0.00001"))})).wait(1),t(2,c=0)}catch(p){console.log(p)}t(4,m=!1)}function f(){c=je(this.value),t(2,c)}return s.$$set=p=>{"healthFactor"in p&&t(7,r=p.healthFactor),"currentDebt"in p&&t(0,a=p.currentDebt),"currentCollateral"in p&&t(8,n=p.currentCollateral),"maticSpotPrice"in p&&t(1,o=p.maticSpotPrice)},s.$$.update=()=>{s.$$.dirty&5&&(c?t(3,d=a.div(100).mul(Math.round(c))):t(3,d=Me("0"))),s.$$.dirty&392&&t(5,l=n.gt(0)?Number(r.toFixed(2))-(d?Number(d.mul(1e4).div(n))/100:0):"0")},[a,o,c,d,m,l,w,r,n,f]}class gt extends Pe{constructor(e){super();Ce(this,e,bt,vt,Se,{healthFactor:7,currentDebt:0,currentCollateral:8,maticSpotPrice:1})}}function Je(s,e,t){const l=s.slice();return l[9]=e[t],l}function kt(s){let e,t,l;return{c(){e=g("span"),t=q("Cant Widthdraw... please repay loan.")},l(r){e=k(r,"SPAN",{});var a=b(e);t=D(a,"Cant Widthdraw... please repay loan."),a.forEach(h)},m(r,a){N(r,e,a),i(e,t)},p:O,i(r){l||Ye(()=>{l=et(e,Le,{}),l.start()})},o:O,d(r){r&&h(e)}}}function wt(s){let e,t,l,r;function a(){return s[8](s[9])}return{c(){e=g("button"),t=q("Remove Collateral"),this.h()},l(n){e=k(n,"BUTTON",{class:!0});var o=b(e);t=D(o,"Remove Collateral"),o.forEach(h),this.h()},h(){u(e,"class","py-2 px-4 flex justify-center items-center bg-gradient-to-r from-cyan-500 to-purple-500 hover:bg-blue-700 focus:ring-blue-500 focus:ring-offset-blue-200 text-white rounded-lg"),U(e,"disabled",s[2]),U(e,"cursor-wait",s[2])},m(n,o){N(n,e,o),i(e,t),l||(r=ce(e,"click",a),l=!0)},p(n,o){s=n,o&4&&U(e,"disabled",s[2]),o&4&&U(e,"cursor-wait",s[2])},i:O,o:O,d(n){n&&h(e),l=!1,r()}}}function Ke(s){let e,t,l,r=s[9]+"",a,n,o,c,d,m,w,f,p;function v(P,_){return P[0]<=50&&P[1]<=50?wt:kt}let E=v(s),x=E(s);return{c(){e=g("div"),t=g("h1"),l=q("Perpetual #"),a=q(r),n=C(),o=g("img"),d=C(),m=g("div"),x.c(),w=C(),this.h()},l(P){e=k(P,"DIV",{class:!0});var _=b(e);t=k(_,"H1",{class:!0});var y=b(t);l=D(y,"Perpetual #"),a=D(y,r),y.forEach(h),n=S(_),o=k(_,"IMG",{src:!0,class:!0}),d=S(_),m=k(_,"DIV",{class:!0});var F=b(m);x.l(F),F.forEach(h),w=S(_),_.forEach(h),this.h()},h(){u(t,"class","pb-4 italic text-2xl font-semibold text-gray-700 capitalize"),Ue(o.src,c=""+(Ge+"/tokens/"+s[9]+".jpeg"))||u(o,"src",c),u(o,"class","rounded"),u(m,"class","py-3 flex justify-center"),u(e,"class","w-1/3 p-10 text-center")},m(P,_){N(P,e,_),i(e,t),i(t,l),i(t,a),i(e,n),i(e,o),i(e,d),i(e,m),x.m(m,null),i(e,w),p=!0},p(P,_){(!p||_&8)&&r!==(r=P[9]+"")&&K(a,r),(!p||_&8&&!Ue(o.src,c=""+(Ge+"/tokens/"+P[9]+".jpeg")))&&u(o,"src",c),E===(E=v(P))&&x?x.p(P,_):(x.d(1),x=E(P),x&&(x.c(),W(x,1),x.m(m,null)))},i(P){p||(W(x),P&&Ye(()=>{f||(f=We(e,Le,{},!0)),f.run(1)}),p=!0)},o(P){P&&(f||(f=We(e,Le,{},!1)),f.run(0)),p=!1},d(P){P&&h(e),x.d(),P&&f&&f.end()}}}function yt(s){let e,t,l,r=s[3],a=[];for(let o=0;o<r.length;o+=1)a[o]=Ke(Je(s,r,o));const n=o=>X(a[o],1,1,()=>{a[o]=null});return{c(){e=g("div"),t=g("div");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=k(o,"DIV",{class:!0});var c=b(e);t=k(c,"DIV",{class:!0});var d=b(t);for(let m=0;m<a.length;m+=1)a[m].l(d);d.forEach(h),c.forEach(h),this.h()},h(){u(t,"class","flex w-full"),u(e,"class","flex w-full")},m(o,c){N(o,e,c),i(e,t);for(let d=0;d<a.length;d+=1)a[d].m(t,null);l=!0},p(o,[c]){if(c&31){r=o[3];let d;for(d=0;d<r.length;d+=1){const m=Je(o,r,d);a[d]?(a[d].p(m,c),W(a[d],1)):(a[d]=Ke(m),a[d].c(),W(a[d],1),a[d].m(t,null))}for(Ae(),d=r.length;d<a.length;d+=1)n(d);Ve()}},i(o){if(!l){for(let c=0;c<r.length;c+=1)W(a[c]);l=!0}},o(o){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)X(a[c]);l=!1},d(o){o&&h(e),Oe(a,o)}}}function Et(s,e,t){let l,r;Ne(s,rt,f=>t(3,r=f));let{healthFactor:a}=e,{currentDebt:n}=e,{currentCollateral:o}=e,c=0;async function d(f){t(2,m=!0);try{await(await ee.museum.withdraw(f)).wait()}catch{}t(2,m=!1)}let m;const w=f=>{d(f)};return s.$$set=f=>{"healthFactor"in f&&t(0,a=f.healthFactor),"currentDebt"in f&&t(5,n=f.currentDebt),"currentCollateral"in f&&t(6,o=f.currentCollateral)},s.$$.update=()=>{s.$$.dirty&64&&t(7,l=o.sub(Me("1"))),s.$$.dirty&160&&(l.lt(n)?t(1,c=100):t(1,c=n.gt(0)?Number(n.mul(1e4).div(l))/100:0))},[a,c,m,r,d,n,o,l,w]}class xt extends Pe{constructor(e){super();Ce(this,e,Et,yt,Se,{healthFactor:0,currentDebt:5,currentCollateral:6})}}function Xe(s,e,t){const l=s.slice();return l[12]=e[t],l}function qt(s){let e,t,l,r,a,n;return{c(){e=g("h1"),t=q("LOADING..."),l=C(),r=oe("svg"),a=oe("path"),n=oe("animate"),this.h()},l(o){e=k(o,"H1",{class:!0});var c=b(e);t=D(c,"LOADING..."),c.forEach(h),l=S(o),r=ne(o,"svg",{xmlns:!0,"xmlns:xlink":!0,style:!0,width:!0,height:!0,viewBox:!0,preserveAspectRatio:!0});var d=b(r);a=ne(d,"path",{fill:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0,d:!0,"stroke-linecap":!0,style:!0});var m=b(a);n=ne(m,"animate",{attributeName:!0,repeatCount:!0,dur:!0,keyTimes:!0,values:!0}),b(n).forEach(h),m.forEach(h),d.forEach(h),this.h()},h(){u(e,"class","text-5xl text-gray-700 "),u(n,"attributeName","stroke-dashoffset"),u(n,"repeatCount","indefinite"),u(n,"dur","1.1363636363636365s"),u(n,"keyTimes","0;1"),u(n,"values","0;256.58892822265625"),u(a,"fill","none"),u(a,"stroke","#0a0a0a"),u(a,"stroke-width","8"),u(a,"stroke-dasharray","42.76482137044271 42.76482137044271"),u(a,"d","M24.3 30C11.4 30 5 43.3 5 50s6.4 20 19.3 20c19.3 0 32.1-40 51.4-40 C88.6 30 95 43.3 95 50s-6.4 20-19.3 20C56.4 70 43.6 30 24.3 30z"),u(a,"stroke-linecap","round"),ke(a,"transform","scale(0.8)"),ke(a,"transform-origin","50px 50px"),u(r,"xmlns","http://www.w3.org/2000/svg"),u(r,"xmlns:xlink","http://www.w3.org/1999/xlink"),ke(r,"margin","auto"),ke(r,"background","none"),ke(r,"display","block"),ke(r,"shape-rendering","auto"),u(r,"width","200px"),u(r,"height","200px"),u(r,"viewBox","0 0 100 100"),u(r,"preserveAspectRatio","xMidYMid")},m(o,c){N(o,e,c),i(e,t),N(o,l,c),N(o,r,c),i(r,a),i(a,n)},p:O,i:O,o:O,d(o){o&&h(e),o&&h(l),o&&h(r)}}}function Dt(s){let e,t,l,r,a,n,o,c,d,m,w,f,p,v=s[3]>50&&Ze(s);l=new ze({props:{title:"Collateral Value",value:s[2],maticSpotPrice:s[6]}}),a=new ze({props:{title:"Borrowed",value:s[1],maticSpotPrice:s[6]}}),o=new ze({props:{title:"Max Borrow",value:s[4],maticSpotPrice:s[6]}});const E=[Pt,Ft],x=[];function P(_,y){return y&4&&(d=null),d==null&&(d=!!_[2].gt(0)),d?0:1}return m=P(s,-1),w=x[m]=E[m](s),{c(){v&&v.c(),e=C(),t=g("div"),we(l.$$.fragment),r=C(),we(a.$$.fragment),n=C(),we(o.$$.fragment),c=C(),w.c(),f=Re(),this.h()},l(_){v&&v.l(_),e=S(_),t=k(_,"DIV",{class:!0});var y=b(t);ye(l.$$.fragment,y),r=S(y),ye(a.$$.fragment,y),n=S(y),ye(o.$$.fragment,y),y.forEach(h),c=S(_),w.l(_),f=Re(),this.h()},h(){u(t,"class","grid grid-cols-3 gap-4")},m(_,y){v&&v.m(_,y),N(_,e,y),N(_,t,y),Ee(l,t,null),i(t,r),Ee(a,t,null),i(t,n),Ee(o,t,null),N(_,c,y),x[m].m(_,y),N(_,f,y),p=!0},p(_,y){_[3]>50?v?v.p(_,y):(v=Ze(_),v.c(),v.m(e.parentNode,e)):v&&(v.d(1),v=null);const F={};y&4&&(F.value=_[2]),y&64&&(F.maticSpotPrice=_[6]),l.$set(F);const I={};y&2&&(I.value=_[1]),y&64&&(I.maticSpotPrice=_[6]),a.$set(I);const A={};y&16&&(A.value=_[4]),y&64&&(A.maticSpotPrice=_[6]),o.$set(A);let z=m;m=P(_,y),m===z?x[m].p(_,y):(Ae(),X(x[z],1,1,()=>{x[z]=null}),Ve(),w=x[m],w?w.p(_,y):(w=x[m]=E[m](_),w.c()),W(w,1),w.m(f.parentNode,f))},i(_){p||(W(l.$$.fragment,_),W(a.$$.fragment,_),W(o.$$.fragment,_),W(w),p=!0)},o(_){X(l.$$.fragment,_),X(a.$$.fragment,_),X(o.$$.fragment,_),X(w),p=!1},d(_){v&&v.d(_),_&&h(e),_&&h(t),xe(l),xe(a),xe(o),_&&h(c),x[m].d(_),_&&h(f)}}}function Ze(s){let e,t,l,r,a,n,o,c;return{c(){e=g("div"),t=g("p"),l=q("Liquidation Warning!"),r=C(),a=g("p"),n=q("Your Health Factor is "),o=q(s[3]),c=q("%!"),this.h()},l(d){e=k(d,"DIV",{class:!0,role:!0});var m=b(e);t=k(m,"P",{class:!0});var w=b(t);l=D(w,"Liquidation Warning!"),w.forEach(h),r=S(m),a=k(m,"P",{});var f=b(a);n=D(f,"Your Health Factor is "),o=D(f,s[3]),c=D(f,"%!"),f.forEach(h),m.forEach(h),this.h()},h(){u(t,"class","font-bold"),u(e,"class","bg-red-200 my-5 border-red-600 text-red-600 border-l-4 p-4"),u(e,"role","alert")},m(d,m){N(d,e,m),i(e,t),i(t,l),i(e,r),i(e,a),i(a,n),i(a,o),i(a,c)},p(d,m){m&8&&K(o,d[3])},d(d){d&&h(e)}}}function Ft(s){let e,t;return{c(){e=g("h1"),t=q("Please deposit a Perpetual as collateral to take loans."),this.h()},l(l){e=k(l,"H1",{class:!0});var r=b(e);t=D(r,"Please deposit a Perpetual as collateral to take loans."),r.forEach(h),this.h()},h(){u(e,"class","my-8")},m(l,r){N(l,e,r),i(e,t)},p:O,i:O,o:O,d(l){l&&h(e)}}}function Pt(s){let e,t,l,r,a,n,o=[{val:"take",text:"Take a loan"},{val:"repay",text:"Repay loan"},{val:"withdraw",text:"Widthdraw collateral"}],c=[];for(let f=0;f<3;f+=1)c[f]=Qe(Xe(s,o,f));const d=[It,St,Ct],m=[];function w(f,p){return f[5]=="take"?0:f[5]=="repay"?1:f[5]=="withdraw"?2:-1}return~(l=w(s))&&(r=m[l]=d[l](s)),{c(){e=g("div");for(let f=0;f<3;f+=1)c[f].c();t=C(),r&&r.c(),a=Re(),this.h()},l(f){e=k(f,"DIV",{class:!0});var p=b(e);for(let v=0;v<3;v+=1)c[v].l(p);p.forEach(h),t=S(f),r&&r.l(f),a=Re(),this.h()},h(){u(e,"class","flex flex-grow justify-center my-4")},m(f,p){N(f,e,p);for(let v=0;v<3;v+=1)c[v].m(e,null);N(f,t,p),~l&&m[l].m(f,p),N(f,a,p),n=!0},p(f,p){if(p&32){o=[{val:"take",text:"Take a loan"},{val:"repay",text:"Repay loan"},{val:"withdraw",text:"Widthdraw collateral"}];let E;for(E=0;E<3;E+=1){const x=Xe(f,o,E);c[E]?c[E].p(x,p):(c[E]=Qe(x),c[E].c(),c[E].m(e,null))}for(;E<3;E+=1)c[E].d(1)}let v=l;l=w(f),l===v?~l&&m[l].p(f,p):(r&&(Ae(),X(m[v],1,1,()=>{m[v]=null}),Ve()),~l?(r=m[l],r?r.p(f,p):(r=m[l]=d[l](f),r.c()),W(r,1),r.m(a.parentNode,a)):r=null)},i(f){n||(W(r),n=!0)},o(f){X(r),n=!1},d(f){f&&h(e),Oe(c,f),f&&h(t),~l&&m[l].d(f),f&&h(a)}}}function Qe(s){let e,t=s[12].text+"",l,r,a,n;function o(){return s[7](s[12])}return{c(){e=g("button"),l=q(t),r=C(),this.h()},l(c){e=k(c,"BUTTON",{type:!0,class:!0});var d=b(e);l=D(d,t),r=S(d),d.forEach(h),this.h()},h(){u(e,"type","button"),u(e,"class","text-gray-900 bg-white hover:bg-gray-100 border border-gray-200 focus:shadow-lg rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:focus:ring-gray-600 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:bg-gray-700 mr-2 mb-2"),U(e,"bg-gray-100",s[5]==s[12].val),U(e,"shadow-lg",s[5]==s[12].val),U(e,"border-blue-200",s[5]==s[12].val)},m(c,d){N(c,e,d),i(e,l),i(e,r),a||(n=ce(e,"click",o),a=!0)},p(c,d){s=c,d&32&&U(e,"bg-gray-100",s[5]==s[12].val),d&32&&U(e,"shadow-lg",s[5]==s[12].val),d&32&&U(e,"border-blue-200",s[5]==s[12].val)},d(c){c&&h(e),a=!1,n()}}}function Ct(s){let e,t;return e=new xt({props:{healthFactor:s[3],currentCollateral:s[2],currentDebt:s[1]}}),{c(){we(e.$$.fragment)},l(l){ye(e.$$.fragment,l)},m(l,r){Ee(e,l,r),t=!0},p(l,r){const a={};r&8&&(a.healthFactor=l[3]),r&4&&(a.currentCollateral=l[2]),r&2&&(a.currentDebt=l[1]),e.$set(a)},i(l){t||(W(e.$$.fragment,l),t=!0)},o(l){X(e.$$.fragment,l),t=!1},d(l){xe(e,l)}}}function St(s){let e,t;return e=new gt({props:{healthFactor:s[3],currentCollateral:s[2],currentDebt:s[1],maticSpotPrice:s[6]}}),{c(){we(e.$$.fragment)},l(l){ye(e.$$.fragment,l)},m(l,r){Ee(e,l,r),t=!0},p(l,r){const a={};r&8&&(a.healthFactor=l[3]),r&4&&(a.currentCollateral=l[2]),r&2&&(a.currentDebt=l[1]),r&64&&(a.maticSpotPrice=l[6]),e.$set(a)},i(l){t||(W(e.$$.fragment,l),t=!0)},o(l){X(e.$$.fragment,l),t=!1},d(l){xe(e,l)}}}function It(s){let e,t;return e=new mt({props:{healthFactor:s[3],currentCollateral:s[2],currentDebt:s[1],maticSpotPrice:s[6]}}),{c(){we(e.$$.fragment)},l(l){ye(e.$$.fragment,l)},m(l,r){Ee(e,l,r),t=!0},p(l,r){const a={};r&8&&(a.healthFactor=l[3]),r&4&&(a.currentCollateral=l[2]),r&2&&(a.currentDebt=l[1]),r&64&&(a.maticSpotPrice=l[6]),e.$set(a)},i(l){t||(W(e.$$.fragment,l),t=!0)},o(l){X(e.$$.fragment,l),t=!1},d(l){xe(e,l)}}}function Nt(s){let e,t,l,r,a,n,o,c,d,m,w,f,p,v;const E=[Dt,qt],x=[];function P(_,y){return _[0]?1:0}return f=P(s),p=x[f]=E[f](s),{c(){e=C(),t=g("div"),l=g("div"),r=g("h1"),a=q("Dashboard"),n=C(),o=g("span"),c=q("Current Health Factor: "),d=q(s[3]),m=q("%"),w=C(),p.c(),this.h()},l(_){tt('[data-svelte="svelte-wb0aut"]',document.head).forEach(h),e=S(_),t=k(_,"DIV",{class:!0});var F=b(t);l=k(F,"DIV",{class:!0});var I=b(l);r=k(I,"H1",{class:!0});var A=b(r);a=D(A,"Dashboard"),A.forEach(h),n=S(I),o=k(I,"SPAN",{class:!0});var z=b(o);c=D(z,"Current Health Factor: "),d=D(z,s[3]),m=D(z,"%"),z.forEach(h),I.forEach(h),w=S(F),p.l(F),F.forEach(h),this.h()},h(){document.title="Loans",u(r,"class","flex-grow text-left"),u(o,"class","text-md pt-5"),u(l,"class","flex "),u(t,"class","content svelte-1x0xzh8")},m(_,y){N(_,e,y),N(_,t,y),i(t,l),i(l,r),i(r,a),i(l,n),i(l,o),i(o,c),i(o,d),i(o,m),i(t,w),x[f].m(t,null),v=!0},p(_,[y]){(!v||y&8)&&K(d,_[3]);let F=f;f=P(_),f===F?x[f].p(_,y):(Ae(),X(x[F],1,1,()=>{x[F]=null}),Ve(),p=x[f],p?p.p(_,y):(p=x[f]=E[f](_),p.c()),W(p,1),p.m(t,null))},i(_){v||(W(p),v=!0)},o(_){X(p),v=!1},d(_){_&&h(e),_&&h(t),x[f].d()}}}function Tt(s,e,t){let l,r;Ne(s,at,E=>t(8,l=E)),Ne(s,st,E=>t(9,r=E));let a=!0,n,o,c,d,m="take";async function w(E,x){E==l&&await f()}lt(async()=>{await r,await f();let E=await fetch("https://api.covalenthq.com/v1/pricing/tickers/?quote-currency=USD&format=JSON&tickers=matic&key=ckey_814a704909fe46aca8efc7cb84b");return E=await E.json(),t(6,p=E.data.items[0].quote_rate),t(0,a=!1),ee.museum.on("Borrow",w),ee.museum.on("Repay",w),ee.museum.on("Withdraw",w),()=>{ee.museum.off("Borrow",w),ee.museum.off("Repay",w),ee.museum.off("Withdraw",w)}});async function f(){t(1,n=await ee.museum.totalDebt(l)),t(2,o=await ee.museum.collateralAmount(l)),t(3,c=n.gt(0)?Number(n.mul(1e4).div(o))/100:0),t(4,d=o.div(2).sub(n)),t(4,d=d.lt(0)?0:d)}let p;return[a,n,o,c,d,m,p,E=>t(5,m=E.val)]}class Mt extends Pe{constructor(e){super();Ce(this,e,Tt,Nt,Se,{})}}export{Mt as default};
