import{S as Pe,i as Ce,s as Se,e as b,G as se,k as C,t as q,c as g,a as v,H as oe,d as h,m as S,h as D,b as c,g as N,J as i,j as K,K as W,a2 as Qe,a3 as $,L as Ne,I as U,a4 as Te,M as ce,a1 as He,a5 as je,V as Me,X as Ue,q as O,Y as Ye,Z as Oe,$ as Le,n as Ae,o as X,p as Ve,_ as We,a6 as $e,U as et,v as tt,f as ke,w as we,l as Re,x as ye,y as Ee,B as xe}from"../chunks/vendor-e23481e1.js";import{c as ne,f as lt,a as rt,d as at}from"../chunks/eth-b4b05d56.js";function st(s){let e=(s[2]*s[1]).toFixed(3)+"",t,l,r,a;return{c(){t=q(e),l=C(),r=b("span"),a=q("USD"),this.h()},l(n){t=D(n,e),l=S(n),r=g(n,"SPAN",{class:!0});var o=v(r);a=D(o,"USD"),o.forEach(h),this.h()},h(){c(r,"class","text-sm")},m(n,o){N(n,t,o),N(n,l,o),N(n,r,o),i(r,a)},p(n,o){o&6&&e!==(e=(n[2]*n[1]).toFixed(3)+"")&&K(t,e)},d(n){n&&h(t),n&&h(l),n&&h(r)}}}function ot(s){let e=s[2].toFixed(3)+"",t,l,r,a;return{c(){t=q(e),l=C(),r=b("span"),a=q("MATIC"),this.h()},l(n){t=D(n,e),l=S(n),r=g(n,"SPAN",{class:!0});var o=v(r);a=D(o,"MATIC"),o.forEach(h),this.h()},h(){c(r,"class","text-sm")},m(n,o){N(n,t,o),N(n,l,o),N(n,r,o),i(r,a)},p(n,o){o&4&&e!==(e=n[2].toFixed(3)+"")&&K(t,e)},d(n){n&&h(t),n&&h(l),n&&h(r)}}}function nt(s){let e,t,l,r,a,n,o,u,d,_,w,f,m,k,E=s[2].toFixed(3)+"",x,P;function p(I,A){return I[1]?st:ot}let y=p(s),F=y(s);return{c(){e=b("div"),t=b("div"),l=b("span"),r=se("svg"),a=se("path"),n=C(),o=b("p"),u=q(s[0]),d=C(),_=b("div"),w=b("p"),F.c(),f=C(),m=b("div"),k=b("span"),x=q(E),P=q(" MATIC"),this.h()},l(I){e=g(I,"DIV",{class:!0,"hover:bg-sky-700":!0});var A=v(e);t=g(A,"DIV",{class:!0});var B=v(t);l=g(B,"SPAN",{class:!0});var Y=v(l);r=oe(Y,"svg",{width:!0,fill:!0,height:!0,class:!0,viewBox:!0,xmlns:!0});var Z=v(r);a=oe(Z,"path",{d:!0});var ee=v(a);ee.forEach(h),Z.forEach(h),Y.forEach(h),n=S(B),o=g(B,"P",{class:!0});var H=v(o);u=D(H,s[0]),H.forEach(h),B.forEach(h),d=S(A),_=g(A,"DIV",{class:!0});var te=v(_);w=g(te,"P",{class:!0});var L=v(w);F.l(L),L.forEach(h),te.forEach(h),f=S(A),m=g(A,"DIV",{class:!0});var j=v(m);k=g(j,"SPAN",{});var G=v(k);x=D(G,E),P=D(G," MATIC"),G.forEach(h),j.forEach(h),A.forEach(h),this.h()},h(){c(a,"d","M1362 1185q0 153-99.5 263.5t-258.5 136.5v175q0 14-9 23t-23 9h-135q-13 0-22.5-9.5t-9.5-22.5v-175q-66-9-127.5-31t-101.5-44.5-74-48-46.5-37.5-17.5-18q-17-21-2-41l103-135q7-10 23-12 15-2 24 9l2 2q113 99 243 125 37 8 74 8 81 0 142.5-43t61.5-122q0-28-15-53t-33.5-42-58.5-37.5-66-32-80-32.5q-39-16-61.5-25t-61.5-26.5-62.5-31-56.5-35.5-53.5-42.5-43.5-49-35.5-58-21-66.5-8.5-78q0-138 98-242t255-134v-180q0-13 9.5-22.5t22.5-9.5h135q14 0 23 9t9 23v176q57 6 110.5 23t87 33.5 63.5 37.5 39 29 15 14q17 18 5 38l-81 146q-8 15-23 16-14 3-27-7-3-3-14.5-12t-39-26.5-58.5-32-74.5-26-85.5-11.5q-95 0-155 43t-60 111q0 26 8.5 48t29.5 41.5 39.5 33 56 31 60.5 27 70 27.5q53 20 81 31.5t76 35 75.5 42.5 62 50 53 63.5 31.5 76.5 13 94z"),c(r,"width","40"),c(r,"fill","currentColor"),c(r,"height","40"),c(r,"class","text-purple-500 h-4 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"),c(r,"viewBox","0 0 1792 1792"),c(r,"xmlns","http://www.w3.org/2000/svg"),c(l,"class","rounded-xl relative p-4 bg-purple-200"),c(o,"class","text-md text-black dark:text-white ml-2"),c(t,"class","flex items-center"),c(w,"class","text-gray-700 dark:text-gray-100 text-4xl text-left font-bold my-4"),c(_,"class","flex flex-col justify-start"),c(m,"class","flex items-center text-gray-700 dark:text-gray-100 text-sm"),c(e,"class","shadow-lg rounded-2xl p-4 bg-white dark:bg-gray-800"),c(e,"hover:bg-sky-700","")},m(I,A){N(I,e,A),i(e,t),i(t,l),i(l,r),i(r,a),i(t,n),i(t,o),i(o,u),i(e,d),i(e,_),i(_,w),F.m(w,null),i(e,f),i(e,m),i(m,k),i(k,x),i(k,P)},p(I,[A]){A&1&&K(u,I[0]),y===(y=p(I))&&F?F.p(I,A):(F.d(1),F=y(I),F&&(F.c(),F.m(w,null))),A&4&&E!==(E=I[2].toFixed(3)+"")&&K(x,E)},i:W,o:W,d(I){I&&h(e),F.d()}}}function it(s,e,t){let l,{title:r=""}=e,{value:a=0}=e,{maticSpotPrice:n=0}=e;const o=Qe(Number($(a)),{duration:500});return Ne(s,o,u=>t(2,l=u)),s.$$set=u=>{"title"in u&&t(0,r=u.title),"value"in u&&t(4,a=u.value),"maticSpotPrice"in u&&t(1,n=u.maticSpotPrice)},s.$$.update=()=>{s.$$.dirty&16&&a&&o.set(Number($(a)))},[r,n,l,o,a]}class Be extends Pe{constructor(e){super();Ce(this,e,it,nt,Se,{title:0,value:4,maticSpotPrice:1})}}function ut(s){let e;return{c(){e=q("Take Loan")},l(t){e=D(t,"Take Loan")},m(t,l){N(t,e,l)},d(t){t&&h(e)}}}function ct(s){let e,t,l;return{c(){e=se("svg"),t=se("path"),l=q(`
      Taking Loan...`),this.h()},l(r){e=oe(r,"svg",{width:!0,height:!0,fill:!0,class:!0,viewBox:!0,xmlns:!0});var a=v(e);t=oe(a,"path",{d:!0});var n=v(t);n.forEach(h),a.forEach(h),l=D(r,`
      Taking Loan...`),this.h()},h(){c(t,"d","M526 1394q0 53-37.5 90.5t-90.5 37.5q-52 0-90-38t-38-90q0-53 37.5-90.5t90.5-37.5 90.5 37.5 37.5 90.5zm498 206q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm-704-704q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm1202 498q0 52-38 90t-90 38q-53 0-90.5-37.5t-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm-964-996q0 66-47 113t-113 47-113-47-47-113 47-113 113-47 113 47 47 113zm1170 498q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm-640-704q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm530 206q0 93-66 158.5t-158 65.5q-93 0-158.5-65.5t-65.5-158.5q0-92 65.5-158t158.5-66q92 0 158 66t66 158z"),c(e,"width","20"),c(e,"height","20"),c(e,"fill","currentColor"),c(e,"class","mr-2 animate-spin"),c(e,"viewBox","0 0 1792 1792"),c(e,"xmlns","http://www.w3.org/2000/svg")},m(r,a){N(r,e,a),i(e,t),N(r,l,a)},d(r){r&&h(e),r&&h(l)}}}function ft(s){let e,t,l,r,a,n,o=(s[4]?Number($(s[4])).toFixed(2):"---")+"",u,d,_,w,f,m,k=(s[4]?(s[2]*Number($(s[4]))).toFixed(3):"---")+"",E,x,P,p,y,F,I,A,B,Y,Z,ee,H,te,L,j,G,z,fe,J=(Number(s[0].toFixed(2))+(s[4]?Number(s[4].mul(1e4).div(s[1]))/100:0)).toFixed(3)+"",ie,le,ue,ve;function be(R,T){return R[5]?ct:ut}let he=be(s),Q=he(s);return{c(){e=b("div"),t=b("h1"),l=q("Take a loan! You can borrow up to 50% of your collateral! (INTEREST RATE: 10% YEARLY)"),r=C(),a=b("div"),n=b("p"),u=q(o),d=C(),_=b("span"),w=q("MATIC"),f=C(),m=b("p"),E=q(k),x=C(),P=b("span"),p=q("USD"),y=C(),F=b("div"),I=b("div"),A=q("Safer"),B=C(),Y=b("div"),Z=q("Riskier"),ee=C(),H=b("input"),te=C(),L=b("div"),j=b("button"),Q.c(),G=C(),z=b("p"),fe=q("Health Factor: "),ie=q(J),le=q("%"),this.h()},l(R){e=g(R,"DIV",{class:!0});var T=v(e);t=g(T,"H1",{class:!0});var M=v(t);l=D(M,"Take a loan! You can borrow up to 50% of your collateral! (INTEREST RATE: 10% YEARLY)"),M.forEach(h),r=S(T),a=g(T,"DIV",{class:!0});var V=v(a);n=g(V,"P",{class:!0});var de=v(n);u=D(de,o),d=S(de),_=g(de,"SPAN",{class:!0});var me=v(_);w=D(me,"MATIC"),me.forEach(h),de.forEach(h),f=S(V),m=g(V,"P",{class:!0});var re=v(m);E=D(re,k),x=S(re),P=g(re,"SPAN",{class:!0});var qe=v(P);p=D(qe,"USD"),qe.forEach(h),re.forEach(h),V.forEach(h),y=S(T),F=g(T,"DIV",{class:!0});var ae=v(F);I=g(ae,"DIV",{class:!0});var De=v(I);A=D(De,"Safer"),De.forEach(h),B=S(ae),Y=g(ae,"DIV",{class:!0});var _e=v(Y);Z=D(_e,"Riskier"),_e.forEach(h),ae.forEach(h),ee=S(T),H=g(T,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),te=S(T),L=g(T,"DIV",{class:!0});var Fe=v(L);j=g(Fe,"BUTTON",{class:!0});var ge=v(j);Q.l(ge),ge.forEach(h),Fe.forEach(h),G=S(T),z=g(T,"P",{class:!0});var pe=v(z);fe=D(pe,"Health Factor: "),ie=D(pe,J),le=D(pe,"%"),pe.forEach(h),T.forEach(h),this.h()},h(){c(t,"class","text-xl font-extrabold text-transparent bg-clip-text bg-gradient-to-br from-blue-300 to-green-600"),c(_,"class","text-sm"),c(n,"class","px-5 text-gray-700 dark:text-gray-100 text-4xl text-left font-bold my-4"),c(P,"class","text-sm"),c(m,"class","px-5 dark:text-gray-100 text-4xl text-left font-bold my-4"),c(a,"class","flex justify-center"),c(I,"class","flex-1 ..."),c(Y,"class","flex-1 ..."),c(F,"class","flex text-gray-700 dark:text-gray-100 text-sm"),c(H,"type","range"),c(H,"min","0"),c(H,"max","100"),c(H,"class","w-full svelte-5hac4d"),c(H,"id","myinput"),c(j,"class","py-2 px-4 flex justify-center items-center bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 focus:ring-offset-blue-200 text-white rounded-lg "),U(j,"disabled",s[5]),U(j,"cursor-wait",s[5]),c(L,"class","py-3 flex justify-center ..."),c(z,"class","text-gray-700 dark:text-gray-100 text-sm"),c(e,"class","shadow-lg rounded-2xl p-4 mt-4 bg-white dark:bg-gray-800 text-center")},m(R,T){N(R,e,T),i(e,t),i(t,l),i(e,r),i(e,a),i(a,n),i(n,u),i(n,d),i(n,_),i(_,w),i(a,f),i(a,m),i(m,E),i(m,x),i(m,P),i(P,p),i(e,y),i(e,F),i(F,I),i(I,A),i(F,B),i(F,Y),i(Y,Z),i(e,ee),i(e,H),Te(H,s[3]),i(e,te),i(e,L),i(L,j),Q.m(j,null),i(e,G),i(e,z),i(z,fe),i(z,ie),i(z,le),ue||(ve=[ce(H,"change",s[9]),ce(H,"input",s[9]),ce(j,"click",s[6])],ue=!0)},p(R,[T]){T&16&&o!==(o=(R[4]?Number($(R[4])).toFixed(2):"---")+"")&&K(u,o),T&20&&k!==(k=(R[4]?(R[2]*Number($(R[4]))).toFixed(3):"---")+"")&&K(E,k),T&8&&Te(H,R[3]),he!==(he=be(R))&&(Q.d(1),Q=he(R),Q&&(Q.c(),Q.m(j,null))),T&32&&U(j,"disabled",R[5]),T&32&&U(j,"cursor-wait",R[5]),T&19&&J!==(J=(Number(R[0].toFixed(2))+(R[4]?Number(R[4].mul(1e4).div(R[1]))/100:0)).toFixed(3)+"")&&K(ie,J)},i:W,o:W,d(R){R&&h(e),Q.d(),ue=!1,He(ve)}}}function ht(s,e,t){let{healthFactor:l}=e,{currentDebt:r}=e,{currentCollateral:a}=e,{maticSpotPrice:n}=e,o=0,u,d,_=!1;async function w(){try{t(5,_=!0),await(await ne.museum.borrow(d,!1)).wait(1),t(3,o=0)}catch(m){console.log(m)}t(5,_=!1)}function f(){o=je(this.value),t(3,o)}return s.$$set=m=>{"healthFactor"in m&&t(0,l=m.healthFactor),"currentDebt"in m&&t(7,r=m.currentDebt),"currentCollateral"in m&&t(1,a=m.currentCollateral),"maticSpotPrice"in m&&t(2,n=m.maticSpotPrice)},s.$$.update=()=>{s.$$.dirty&130&&t(8,u=a.div(2).sub(r)),s.$$.dirty&256&&t(8,u=u.lt(0)?0:u),s.$$.dirty&264&&(o&&u?t(4,d=u.div(100).mul(Math.round(o))):t(4,d=0))},[l,a,n,o,d,_,w,r,u,f]}class dt extends Pe{constructor(e){super();Ce(this,e,ht,ft,Se,{healthFactor:0,currentDebt:7,currentCollateral:1,maticSpotPrice:2})}}function mt(s){let e;return{c(){e=q("Repay loan")},l(t){e=D(t,"Repay loan")},m(t,l){N(t,e,l)},d(t){t&&h(e)}}}function _t(s){let e,t,l;return{c(){e=se("svg"),t=se("path"),l=q(`
      Repaying Loan...`),this.h()},l(r){e=oe(r,"svg",{width:!0,height:!0,fill:!0,class:!0,viewBox:!0,xmlns:!0});var a=v(e);t=oe(a,"path",{d:!0});var n=v(t);n.forEach(h),a.forEach(h),l=D(r,`
      Repaying Loan...`),this.h()},h(){c(t,"d","M526 1394q0 53-37.5 90.5t-90.5 37.5q-52 0-90-38t-38-90q0-53 37.5-90.5t90.5-37.5 90.5 37.5 37.5 90.5zm498 206q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm-704-704q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm1202 498q0 52-38 90t-90 38q-53 0-90.5-37.5t-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm-964-996q0 66-47 113t-113 47-113-47-47-113 47-113 113-47 113 47 47 113zm1170 498q0 53-37.5 90.5t-90.5 37.5-90.5-37.5-37.5-90.5 37.5-90.5 90.5-37.5 90.5 37.5 37.5 90.5zm-640-704q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm530 206q0 93-66 158.5t-158 65.5q-93 0-158.5-65.5t-65.5-158.5q0-92 65.5-158t158.5-66q92 0 158 66t66 158z"),c(e,"width","20"),c(e,"height","20"),c(e,"fill","currentColor"),c(e,"class","mr-2 animate-spin"),c(e,"viewBox","0 0 1792 1792"),c(e,"xmlns","http://www.w3.org/2000/svg")},m(r,a){N(r,e,a),i(e,t),N(r,l,a)},d(r){r&&h(e),r&&h(l)}}}function pt(s){let e,t,l,r,a,n,o=(s[3]?Number($(s[3])).toFixed(2):"0")+"",u,d,_,w,f,m,k=(s[3]?(s[1]*Number($(s[3]))).toFixed(3):"0")+"",E,x,P,p,y,F,I,A,B,Y,Z=Number($(s[0])).toFixed(3)+"",ee,H,te,L,j,G,z,fe,J,ie,le=s[5].toFixed(3)+"",ue,ve,be,he;function Q(M,V){return M[4]?_t:mt}let R=Q(s),T=R(s);return{c(){e=b("div"),t=b("h1"),l=q("Repay Loan"),r=C(),a=b("div"),n=b("p"),u=q(o),d=C(),_=b("span"),w=q("MATIC"),f=C(),m=b("p"),E=q(k),x=C(),P=b("span"),p=q("USD"),y=C(),F=b("div"),I=b("div"),A=q("0"),B=C(),Y=b("div"),ee=q(Z),H=q(" MATIC"),te=C(),L=b("input"),j=C(),G=b("div"),z=b("button"),T.c(),fe=C(),J=b("p"),ie=q("Health Factor: "),ue=q(le),ve=q("%"),this.h()},l(M){e=g(M,"DIV",{class:!0});var V=v(e);t=g(V,"H1",{class:!0});var de=v(t);l=D(de,"Repay Loan"),de.forEach(h),r=S(V),a=g(V,"DIV",{class:!0});var me=v(a);n=g(me,"P",{class:!0});var re=v(n);u=D(re,o),d=S(re),_=g(re,"SPAN",{class:!0});var qe=v(_);w=D(qe,"MATIC"),qe.forEach(h),re.forEach(h),f=S(me),m=g(me,"P",{class:!0});var ae=v(m);E=D(ae,k),x=S(ae),P=g(ae,"SPAN",{class:!0});var De=v(P);p=D(De,"USD"),De.forEach(h),ae.forEach(h),me.forEach(h),y=S(V),F=g(V,"DIV",{class:!0});var _e=v(F);I=g(_e,"DIV",{class:!0});var Fe=v(I);A=D(Fe,"0"),Fe.forEach(h),B=S(_e),Y=g(_e,"DIV",{class:!0});var ge=v(Y);ee=D(ge,Z),H=D(ge," MATIC"),ge.forEach(h),_e.forEach(h),te=S(V),L=g(V,"INPUT",{type:!0,min:!0,max:!0,class:!0,id:!0}),j=S(V),G=g(V,"DIV",{class:!0});var pe=v(G);z=g(pe,"BUTTON",{class:!0});var ze=v(z);T.l(ze),ze.forEach(h),pe.forEach(h),fe=S(V),J=g(V,"P",{class:!0});var Ie=v(J);ie=D(Ie,"Health Factor: "),ue=D(Ie,le),ve=D(Ie,"%"),Ie.forEach(h),V.forEach(h),this.h()},h(){c(t,"class","text-xl font-extrabold text-transparent bg-clip-text bg-gradient-to-br from-blue-300 to-green-600"),c(_,"class","text-sm"),c(n,"class","px-5 text-gray-700 dark:text-gray-100 text-4xl text-left font-bold my-4"),c(P,"class","text-sm"),c(m,"class","px-5 dark:text-gray-100 text-4xl text-left font-bold my-4"),c(a,"class","flex justify-center"),c(I,"class","flex-1 ..."),c(Y,"class","flex-1 ..."),c(F,"class","flex text-gray-700 dark:text-gray-100 text-sm"),c(L,"type","range"),c(L,"min","0"),c(L,"max","100"),c(L,"class","w-full svelte-10t4h28"),c(L,"id","myinput"),c(z,"class","py-2 px-4 flex justify-center items-center bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 focus:ring-offset-blue-200 text-white rounded-lg "),U(z,"disabled",s[4]),U(z,"cursor-wait",s[4]),c(G,"class","py-3 flex justify-center ..."),c(J,"class","text-gray-700 dark:text-gray-100 text-sm"),c(e,"class","shadow-lg rounded-2xl p-4 mt-4 bg-white dark:bg-gray-800 text-center")},m(M,V){N(M,e,V),i(e,t),i(t,l),i(e,r),i(e,a),i(a,n),i(n,u),i(n,d),i(n,_),i(_,w),i(a,f),i(a,m),i(m,E),i(m,x),i(m,P),i(P,p),i(e,y),i(e,F),i(F,I),i(I,A),i(F,B),i(F,Y),i(Y,ee),i(Y,H),i(e,te),i(e,L),Te(L,s[2]),i(e,j),i(e,G),i(G,z),T.m(z,null),i(e,fe),i(e,J),i(J,ie),i(J,ue),i(J,ve),be||(he=[ce(L,"change",s[9]),ce(L,"input",s[9]),ce(z,"click",s[6])],be=!0)},p(M,[V]){V&8&&o!==(o=(M[3]?Number($(M[3])).toFixed(2):"0")+"")&&K(u,o),V&10&&k!==(k=(M[3]?(M[1]*Number($(M[3]))).toFixed(3):"0")+"")&&K(E,k),V&1&&Z!==(Z=Number($(M[0])).toFixed(3)+"")&&K(ee,Z),V&4&&Te(L,M[2]),R!==(R=Q(M))&&(T.d(1),T=R(M),T&&(T.c(),T.m(z,null))),V&16&&U(z,"disabled",M[4]),V&16&&U(z,"cursor-wait",M[4]),V&32&&le!==(le=M[5].toFixed(3)+"")&&K(ue,le)},i:W,o:W,d(M){M&&h(e),T.d(),be=!1,He(he)}}}function vt(s,e,t){let l,{healthFactor:r}=e,{currentDebt:a}=e,{currentCollateral:n}=e,{maticSpotPrice:o}=e,u=0,d,_=!1;async function w(){try{t(4,_=!0),await(await ne.museum.repay({value:d.add(Me("0.00001"))})).wait(1),t(2,u=0)}catch(m){console.log(m)}t(4,_=!1)}function f(){u=je(this.value),t(2,u)}return s.$$set=m=>{"healthFactor"in m&&t(7,r=m.healthFactor),"currentDebt"in m&&t(0,a=m.currentDebt),"currentCollateral"in m&&t(8,n=m.currentCollateral),"maticSpotPrice"in m&&t(1,o=m.maticSpotPrice)},s.$$.update=()=>{s.$$.dirty&5&&(u?t(3,d=a.div(100).mul(Math.round(u))):t(3,d=Me("0"))),s.$$.dirty&392&&t(5,l=n.gt(0)?Number(r.toFixed(2))-(d?Number(d.mul(1e4).div(n))/100:0):"0")},[a,o,u,d,_,l,w,r,n,f]}class bt extends Pe{constructor(e){super();Ce(this,e,vt,pt,Se,{healthFactor:7,currentDebt:0,currentCollateral:8,maticSpotPrice:1})}}function Ge(s,e,t){const l=s.slice();return l[9]=e[t],l}function gt(s){let e,t,l;return{c(){e=b("span"),t=q("Cant Widthdraw... please repay loan.")},l(r){e=g(r,"SPAN",{});var a=v(e);t=D(a,"Cant Widthdraw... please repay loan."),a.forEach(h)},m(r,a){N(r,e,a),i(e,t)},p:W,i(r){l||Ye(()=>{l=$e(e,Le,{}),l.start()})},o:W,d(r){r&&h(e)}}}function kt(s){let e,t,l,r;function a(){return s[8](s[9])}return{c(){e=b("button"),t=q("Remove Collateral"),this.h()},l(n){e=g(n,"BUTTON",{class:!0});var o=v(e);t=D(o,"Remove Collateral"),o.forEach(h),this.h()},h(){c(e,"class","py-2 px-4 flex justify-center items-center bg-gradient-to-r from-cyan-500 to-purple-500 hover:bg-blue-700 focus:ring-blue-500 focus:ring-offset-blue-200 text-white rounded-lg"),U(e,"disabled",s[2]),U(e,"cursor-wait",s[2])},m(n,o){N(n,e,o),i(e,t),l||(r=ce(e,"click",a),l=!0)},p(n,o){s=n,o&4&&U(e,"disabled",s[2]),o&4&&U(e,"cursor-wait",s[2])},i:W,o:W,d(n){n&&h(e),l=!1,r()}}}function Je(s){let e,t,l,r=s[9]+"",a,n,o,u,d,_,w,f,m;function k(P,p){return P[0]<=50&&P[1]<=50?kt:gt}let E=k(s),x=E(s);return{c(){e=b("div"),t=b("h1"),l=q("Perpetual #"),a=q(r),n=C(),o=b("img"),d=C(),_=b("div"),x.c(),w=C(),this.h()},l(P){e=g(P,"DIV",{class:!0});var p=v(e);t=g(p,"H1",{class:!0});var y=v(t);l=D(y,"Perpetual #"),a=D(y,r),y.forEach(h),n=S(p),o=g(p,"IMG",{src:!0,class:!0}),d=S(p),_=g(p,"DIV",{class:!0});var F=v(_);x.l(F),F.forEach(h),w=S(p),p.forEach(h),this.h()},h(){c(t,"class","pb-4 italic text-2xl font-semibold text-gray-700 capitalize"),Ue(o.src,u="/tokens/"+s[9]+".jpeg")||c(o,"src",u),c(o,"class","rounded"),c(_,"class","py-3 flex justify-center"),c(e,"class","w-1/3 p-10 text-center")},m(P,p){N(P,e,p),i(e,t),i(t,l),i(t,a),i(e,n),i(e,o),i(e,d),i(e,_),x.m(_,null),i(e,w),m=!0},p(P,p){(!m||p&8)&&r!==(r=P[9]+"")&&K(a,r),(!m||p&8&&!Ue(o.src,u="/tokens/"+P[9]+".jpeg"))&&c(o,"src",u),E===(E=k(P))&&x?x.p(P,p):(x.d(1),x=E(P),x&&(x.c(),O(x,1),x.m(_,null)))},i(P){m||(O(x),P&&Ye(()=>{f||(f=Oe(e,Le,{},!0)),f.run(1)}),m=!0)},o(P){P&&(f||(f=Oe(e,Le,{},!1)),f.run(0)),m=!1},d(P){P&&h(e),x.d(),P&&f&&f.end()}}}function wt(s){let e,t,l,r=s[3],a=[];for(let o=0;o<r.length;o+=1)a[o]=Je(Ge(s,r,o));const n=o=>X(a[o],1,1,()=>{a[o]=null});return{c(){e=b("div"),t=b("div");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=g(o,"DIV",{class:!0});var u=v(e);t=g(u,"DIV",{class:!0});var d=v(t);for(let _=0;_<a.length;_+=1)a[_].l(d);d.forEach(h),u.forEach(h),this.h()},h(){c(t,"class","flex w-full"),c(e,"class","flex w-full")},m(o,u){N(o,e,u),i(e,t);for(let d=0;d<a.length;d+=1)a[d].m(t,null);l=!0},p(o,[u]){if(u&31){r=o[3];let d;for(d=0;d<r.length;d+=1){const _=Ge(o,r,d);a[d]?(a[d].p(_,u),O(a[d],1)):(a[d]=Je(_),a[d].c(),O(a[d],1),a[d].m(t,null))}for(Ae(),d=r.length;d<a.length;d+=1)n(d);Ve()}},i(o){if(!l){for(let u=0;u<r.length;u+=1)O(a[u]);l=!0}},o(o){a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)X(a[u]);l=!1},d(o){o&&h(e),We(a,o)}}}function yt(s,e,t){let l,r;Ne(s,lt,f=>t(3,r=f));let{healthFactor:a}=e,{currentDebt:n}=e,{currentCollateral:o}=e,u=0;async function d(f){t(2,_=!0);try{await(await ne.museum.withdraw(f)).wait()}catch{}t(2,_=!1)}let _;const w=f=>{d(f)};return s.$$set=f=>{"healthFactor"in f&&t(0,a=f.healthFactor),"currentDebt"in f&&t(5,n=f.currentDebt),"currentCollateral"in f&&t(6,o=f.currentCollateral)},s.$$.update=()=>{s.$$.dirty&64&&t(7,l=o.sub(Me("1"))),s.$$.dirty&160&&(l.lt(n)?t(1,u=100):t(1,u=n.gt(0)?Number(n.mul(1e4).div(l))/100:0))},[a,u,_,r,d,n,o,l,w]}class Et extends Pe{constructor(e){super();Ce(this,e,yt,wt,Se,{healthFactor:0,currentDebt:5,currentCollateral:6})}}function Ke(s,e,t){const l=s.slice();return l[12]=e[t],l}function xt(s){let e,t,l,r,a,n;return{c(){e=b("h1"),t=q("LOADING..."),l=C(),r=se("svg"),a=se("path"),n=se("animate"),this.h()},l(o){e=g(o,"H1",{class:!0});var u=v(e);t=D(u,"LOADING..."),u.forEach(h),l=S(o),r=oe(o,"svg",{xmlns:!0,"xmlns:xlink":!0,style:!0,width:!0,height:!0,viewBox:!0,preserveAspectRatio:!0});var d=v(r);a=oe(d,"path",{fill:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0,d:!0,"stroke-linecap":!0,style:!0});var _=v(a);n=oe(_,"animate",{attributeName:!0,repeatCount:!0,dur:!0,keyTimes:!0,values:!0}),v(n).forEach(h),_.forEach(h),d.forEach(h),this.h()},h(){c(e,"class","text-5xl text-gray-700 "),c(n,"attributeName","stroke-dashoffset"),c(n,"repeatCount","indefinite"),c(n,"dur","1.1363636363636365s"),c(n,"keyTimes","0;1"),c(n,"values","0;256.58892822265625"),c(a,"fill","none"),c(a,"stroke","#0a0a0a"),c(a,"stroke-width","8"),c(a,"stroke-dasharray","42.76482137044271 42.76482137044271"),c(a,"d","M24.3 30C11.4 30 5 43.3 5 50s6.4 20 19.3 20c19.3 0 32.1-40 51.4-40 C88.6 30 95 43.3 95 50s-6.4 20-19.3 20C56.4 70 43.6 30 24.3 30z"),c(a,"stroke-linecap","round"),ke(a,"transform","scale(0.8)"),ke(a,"transform-origin","50px 50px"),c(r,"xmlns","http://www.w3.org/2000/svg"),c(r,"xmlns:xlink","http://www.w3.org/1999/xlink"),ke(r,"margin","auto"),ke(r,"background","none"),ke(r,"display","block"),ke(r,"shape-rendering","auto"),c(r,"width","200px"),c(r,"height","200px"),c(r,"viewBox","0 0 100 100"),c(r,"preserveAspectRatio","xMidYMid")},m(o,u){N(o,e,u),i(e,t),N(o,l,u),N(o,r,u),i(r,a),i(a,n)},p:W,i:W,o:W,d(o){o&&h(e),o&&h(l),o&&h(r)}}}function qt(s){let e,t,l,r,a,n,o,u,d,_,w,f,m,k=s[3]>50&&Xe(s);l=new Be({props:{title:"Collateral Value",value:s[2],maticSpotPrice:s[6]}}),a=new Be({props:{title:"Borrowed",value:s[1],maticSpotPrice:s[6]}}),o=new Be({props:{title:"Max Borrow",value:s[4],maticSpotPrice:s[6]}});const E=[Ft,Dt],x=[];function P(p,y){return y&4&&(d=null),d==null&&(d=!!p[2].gt(0)),d?0:1}return _=P(s,-1),w=x[_]=E[_](s),{c(){k&&k.c(),e=C(),t=b("div"),we(l.$$.fragment),r=C(),we(a.$$.fragment),n=C(),we(o.$$.fragment),u=C(),w.c(),f=Re(),this.h()},l(p){k&&k.l(p),e=S(p),t=g(p,"DIV",{class:!0});var y=v(t);ye(l.$$.fragment,y),r=S(y),ye(a.$$.fragment,y),n=S(y),ye(o.$$.fragment,y),y.forEach(h),u=S(p),w.l(p),f=Re(),this.h()},h(){c(t,"class","grid grid-cols-3 gap-4")},m(p,y){k&&k.m(p,y),N(p,e,y),N(p,t,y),Ee(l,t,null),i(t,r),Ee(a,t,null),i(t,n),Ee(o,t,null),N(p,u,y),x[_].m(p,y),N(p,f,y),m=!0},p(p,y){p[3]>50?k?k.p(p,y):(k=Xe(p),k.c(),k.m(e.parentNode,e)):k&&(k.d(1),k=null);const F={};y&4&&(F.value=p[2]),y&64&&(F.maticSpotPrice=p[6]),l.$set(F);const I={};y&2&&(I.value=p[1]),y&64&&(I.maticSpotPrice=p[6]),a.$set(I);const A={};y&16&&(A.value=p[4]),y&64&&(A.maticSpotPrice=p[6]),o.$set(A);let B=_;_=P(p,y),_===B?x[_].p(p,y):(Ae(),X(x[B],1,1,()=>{x[B]=null}),Ve(),w=x[_],w?w.p(p,y):(w=x[_]=E[_](p),w.c()),O(w,1),w.m(f.parentNode,f))},i(p){m||(O(l.$$.fragment,p),O(a.$$.fragment,p),O(o.$$.fragment,p),O(w),m=!0)},o(p){X(l.$$.fragment,p),X(a.$$.fragment,p),X(o.$$.fragment,p),X(w),m=!1},d(p){k&&k.d(p),p&&h(e),p&&h(t),xe(l),xe(a),xe(o),p&&h(u),x[_].d(p),p&&h(f)}}}function Xe(s){let e,t,l,r,a,n,o,u;return{c(){e=b("div"),t=b("p"),l=q("Liquidation Warning!"),r=C(),a=b("p"),n=q("Your Health Factor is "),o=q(s[3]),u=q("%!"),this.h()},l(d){e=g(d,"DIV",{class:!0,role:!0});var _=v(e);t=g(_,"P",{class:!0});var w=v(t);l=D(w,"Liquidation Warning!"),w.forEach(h),r=S(_),a=g(_,"P",{});var f=v(a);n=D(f,"Your Health Factor is "),o=D(f,s[3]),u=D(f,"%!"),f.forEach(h),_.forEach(h),this.h()},h(){c(t,"class","font-bold"),c(e,"class","bg-red-200 my-5 border-red-600 text-red-600 border-l-4 p-4"),c(e,"role","alert")},m(d,_){N(d,e,_),i(e,t),i(t,l),i(e,r),i(e,a),i(a,n),i(a,o),i(a,u)},p(d,_){_&8&&K(o,d[3])},d(d){d&&h(e)}}}function Dt(s){let e,t;return{c(){e=b("h1"),t=q("Please deposit a Perpetual as collateral to take loans."),this.h()},l(l){e=g(l,"H1",{class:!0});var r=v(e);t=D(r,"Please deposit a Perpetual as collateral to take loans."),r.forEach(h),this.h()},h(){c(e,"class","my-8")},m(l,r){N(l,e,r),i(e,t)},p:W,i:W,o:W,d(l){l&&h(e)}}}function Ft(s){let e,t,l,r,a,n,o=[{val:"take",text:"Take a loan"},{val:"repay",text:"Repay loan"},{val:"withdraw",text:"Widthdraw collateral"}],u=[];for(let f=0;f<3;f+=1)u[f]=Ze(Ke(s,o,f));const d=[St,Ct,Pt],_=[];function w(f,m){return f[5]=="take"?0:f[5]=="repay"?1:f[5]=="withdraw"?2:-1}return~(l=w(s))&&(r=_[l]=d[l](s)),{c(){e=b("div");for(let f=0;f<3;f+=1)u[f].c();t=C(),r&&r.c(),a=Re(),this.h()},l(f){e=g(f,"DIV",{class:!0});var m=v(e);for(let k=0;k<3;k+=1)u[k].l(m);m.forEach(h),t=S(f),r&&r.l(f),a=Re(),this.h()},h(){c(e,"class","flex flex-grow justify-center my-4")},m(f,m){N(f,e,m);for(let k=0;k<3;k+=1)u[k].m(e,null);N(f,t,m),~l&&_[l].m(f,m),N(f,a,m),n=!0},p(f,m){if(m&32){o=[{val:"take",text:"Take a loan"},{val:"repay",text:"Repay loan"},{val:"withdraw",text:"Widthdraw collateral"}];let E;for(E=0;E<3;E+=1){const x=Ke(f,o,E);u[E]?u[E].p(x,m):(u[E]=Ze(x),u[E].c(),u[E].m(e,null))}for(;E<3;E+=1)u[E].d(1)}let k=l;l=w(f),l===k?~l&&_[l].p(f,m):(r&&(Ae(),X(_[k],1,1,()=>{_[k]=null}),Ve()),~l?(r=_[l],r?r.p(f,m):(r=_[l]=d[l](f),r.c()),O(r,1),r.m(a.parentNode,a)):r=null)},i(f){n||(O(r),n=!0)},o(f){X(r),n=!1},d(f){f&&h(e),We(u,f),f&&h(t),~l&&_[l].d(f),f&&h(a)}}}function Ze(s){let e,t=s[12].text+"",l,r,a,n;function o(){return s[7](s[12])}return{c(){e=b("button"),l=q(t),r=C(),this.h()},l(u){e=g(u,"BUTTON",{type:!0,class:!0});var d=v(e);l=D(d,t),r=S(d),d.forEach(h),this.h()},h(){c(e,"type","button"),c(e,"class","text-gray-900 bg-white hover:bg-gray-100 border border-gray-200 focus:shadow-lg rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center dark:focus:ring-gray-600 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:bg-gray-700 mr-2 mb-2"),U(e,"bg-gray-100",s[5]==s[12].val),U(e,"shadow-lg",s[5]==s[12].val),U(e,"border-blue-200",s[5]==s[12].val)},m(u,d){N(u,e,d),i(e,l),i(e,r),a||(n=ce(e,"click",o),a=!0)},p(u,d){s=u,d&32&&U(e,"bg-gray-100",s[5]==s[12].val),d&32&&U(e,"shadow-lg",s[5]==s[12].val),d&32&&U(e,"border-blue-200",s[5]==s[12].val)},d(u){u&&h(e),a=!1,n()}}}function Pt(s){let e,t;return e=new Et({props:{healthFactor:s[3],currentCollateral:s[2],currentDebt:s[1]}}),{c(){we(e.$$.fragment)},l(l){ye(e.$$.fragment,l)},m(l,r){Ee(e,l,r),t=!0},p(l,r){const a={};r&8&&(a.healthFactor=l[3]),r&4&&(a.currentCollateral=l[2]),r&2&&(a.currentDebt=l[1]),e.$set(a)},i(l){t||(O(e.$$.fragment,l),t=!0)},o(l){X(e.$$.fragment,l),t=!1},d(l){xe(e,l)}}}function Ct(s){let e,t;return e=new bt({props:{healthFactor:s[3],currentCollateral:s[2],currentDebt:s[1],maticSpotPrice:s[6]}}),{c(){we(e.$$.fragment)},l(l){ye(e.$$.fragment,l)},m(l,r){Ee(e,l,r),t=!0},p(l,r){const a={};r&8&&(a.healthFactor=l[3]),r&4&&(a.currentCollateral=l[2]),r&2&&(a.currentDebt=l[1]),r&64&&(a.maticSpotPrice=l[6]),e.$set(a)},i(l){t||(O(e.$$.fragment,l),t=!0)},o(l){X(e.$$.fragment,l),t=!1},d(l){xe(e,l)}}}function St(s){let e,t;return e=new dt({props:{healthFactor:s[3],currentCollateral:s[2],currentDebt:s[1],maticSpotPrice:s[6]}}),{c(){we(e.$$.fragment)},l(l){ye(e.$$.fragment,l)},m(l,r){Ee(e,l,r),t=!0},p(l,r){const a={};r&8&&(a.healthFactor=l[3]),r&4&&(a.currentCollateral=l[2]),r&2&&(a.currentDebt=l[1]),r&64&&(a.maticSpotPrice=l[6]),e.$set(a)},i(l){t||(O(e.$$.fragment,l),t=!0)},o(l){X(e.$$.fragment,l),t=!1},d(l){xe(e,l)}}}function It(s){let e,t,l,r,a,n,o,u,d,_,w,f,m,k;const E=[qt,xt],x=[];function P(p,y){return p[0]?1:0}return f=P(s),m=x[f]=E[f](s),{c(){e=C(),t=b("div"),l=b("div"),r=b("h1"),a=q("Dashboard"),n=C(),o=b("span"),u=q("Current Health Factor: "),d=q(s[3]),_=q("%"),w=C(),m.c(),this.h()},l(p){et('[data-svelte="svelte-wb0aut"]',document.head).forEach(h),e=S(p),t=g(p,"DIV",{class:!0});var F=v(t);l=g(F,"DIV",{class:!0});var I=v(l);r=g(I,"H1",{class:!0});var A=v(r);a=D(A,"Dashboard"),A.forEach(h),n=S(I),o=g(I,"SPAN",{class:!0});var B=v(o);u=D(B,"Current Health Factor: "),d=D(B,s[3]),_=D(B,"%"),B.forEach(h),I.forEach(h),w=S(F),m.l(F),F.forEach(h),this.h()},h(){document.title="Loans",c(r,"class","flex-grow text-left"),c(o,"class","text-md pt-5"),c(l,"class","flex "),c(t,"class","content svelte-duw748")},m(p,y){N(p,e,y),N(p,t,y),i(t,l),i(l,r),i(r,a),i(l,n),i(l,o),i(o,u),i(o,d),i(o,_),i(t,w),x[f].m(t,null),k=!0},p(p,[y]){(!k||y&8)&&K(d,p[3]);let F=f;f=P(p),f===F?x[f].p(p,y):(Ae(),X(x[F],1,1,()=>{x[F]=null}),Ve(),m=x[f],m?m.p(p,y):(m=x[f]=E[f](p),m.c()),O(m,1),m.m(t,null))},i(p){k||(O(m),k=!0)},o(p){X(m),k=!1},d(p){p&&h(e),p&&h(t),x[f].d()}}}function Nt(s,e,t){let l,r;Ne(s,rt,E=>t(8,l=E)),Ne(s,at,E=>t(9,r=E));let a=!0,n,o,u,d,_="take";async function w(E,x){E==l&&await f()}tt(async()=>{await r,await f();let E=await fetch("https://api.covalenthq.com/v1/pricing/tickers/?quote-currency=USD&format=JSON&tickers=matic&key=ckey_814a704909fe46aca8efc7cb84b");return E=await E.json(),t(6,m=E.data.items[0].quote_rate),t(0,a=!1),ne.museum.on("Borrow",w),ne.museum.on("Repay",w),()=>{ne.museum.off("Borrow",w),ne.museum.off("Repay",w)}});async function f(){t(1,n=await ne.museum.totalDebt(l)),t(2,o=await ne.museum.collateralAmount(l)),t(3,u=n.gt(0)?Number(n.mul(1e4).div(o))/100:0),t(4,d=o.div(2).sub(n)),t(4,d=d.lt(0)?0:d)}let m;return[a,n,o,u,d,_,m,E=>t(5,_=E.val)]}class Vt extends Pe{constructor(e){super();Ce(this,e,Nt,It,Se,{})}}export{Vt as default};
